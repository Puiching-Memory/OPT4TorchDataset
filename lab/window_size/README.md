# 未来窗口效率测试

## 简介

本实验旨在评估OPT缓存算法中不同未来访问窗口大小对缓存性能的影响。OPT（Optimal Page Replacement）算法是一种理论上最优的页面置换算法，它基于对未来访问序列的预知来做出最优的缓存淘汰决策。

在实际应用中，我们可能无法获得完整的未来访问序列，只能获取一定窗口大小内的未来访问信息。本实验通过测试不同窗口大小对缓存命中率和执行时间的影响，帮助我们理解窗口大小对OPT算法性能的影响。

## 结论
在线计算模式下，20%窗口大小和100%窗口大小，命中率几乎没有更多提升。  
在预计算模式下，所有窗口大小计算时间都几乎一致，命中率受窗口影响会出现较大的跳变。  
在线计算模式下20%窗口即可。  
不推荐预计算模式下使用任何窗口。  

## 实验原理

在OPT缓存算法中，预测窗口大小决定了算法能够预知未来多少次访问。窗口越大，算法能够做出的决策越接近理论最优，但同时也会增加计算和内存开销。

本实验通过以下方式测试不同窗口大小的性能：
1. 生成固定长度的未来访问序列
2. 使用不同大小的窗口截取未来访问信息
3. 测试在相同缓存大小下不同窗口大小的命中率和执行时间

## 实验设置

- 数据集：使用 HitRateDataset 模拟数据访问模式
- 缓存大小：测试从10%到90%数据集大小的不同缓存配置
- 窗口大小：测试占总迭代次数0.01到1.0倍的不同窗口大小
- 实验轮数：10轮
- 批处理大小：32

## 运行实验

```bash
cd lab/window_size
python experiment.py
```

## 输出结果

实验结果将保存在 `results/results.csv` 文件中，包含以下信息：
- 不同缓存类型和缓存大小的命中率
- 未命中次数
- 执行时间

结果文件采用易于在Excel中绘图的格式组织，方便进行性能对比分析。
